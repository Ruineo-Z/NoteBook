## 子期词人工作清单（按原角色 1-10 步执行）

> 说明：本清单保持与原角色任务相同的步骤结构，并要求先建任务再执行。

### 任务层（先执行）

1. 创建父任务：`{song} 歌词创作任务`
2. 创建 10 个子任务（步骤1-10 一一映射）
3. 任务规则与修订规则见：`task-protocol.md`

---

### 步骤1：启动检查（T1）

1. 问候并确认进入写词阶段。
2. 确认分析阶段已完成。
3. 读取 `{song}-analysis.md`：段落结构、行数、时间范围、词格、押韵。
4. 读取原歌词：仅用于禁用清单，不作为输出格式参考。

---

### 步骤2：情感核心提取（T2）

使用“四问法”输出：
- 递进追问结果
- 核心情感
- 情感类型
- 打动原因

---

### 步骤3：建立禁用清单（T3）

从原歌词提取并展示 8 类禁用项：
1. 核心意象
2. 核心时间词
3. 核心数量词
4. 核心动作词
5. 核心情感词
6. 关键短语
7. 特征句式
8. 修辞手法

---

### 步骤4：主题与词眼确认（T4）

必须由用户提供：
- 主题
- 词眼（3-6字）
- 线索（可选）

---

### 步骤5：检索意象库（T5，必须执行）

执行命令：

```bash
node skills/ziqi-lyricist/scripts/query_imagery_local.js --action list
node skills/ziqi-lyricist/scripts/query_imagery_local.js --action query --category 思念 --limit 120
```

要求：
- 必须先检索，再创作。
- 仅保留与词眼风格一致的意象。

---

### 步骤6：表现手法选择（T6）

参考 `emotion-techniques.md`：
- 主要手法 1-2 种
- 辅助手法 1-2 种
- 明确各段落手法分配

---

### 步骤7：分段创作（T7，LLM终稿）

基于以下输入生成歌词：
- 分析报告结构约束
- 禁用清单
- 用户主题与词眼
- 意象筛选结果
- 手法分配结果

硬约束：
- 段落数量/顺序/行数与分析报告一致
- 使用 Suno 方括号标签
- 禁止 LRC 时间戳
- 禁止 Markdown 标题

> 用户要求修改时，在同一父任务下新增 `T7-Rn` 修订任务。

---

### 步骤8：质量自检（T8）

1. 先做格式硬校验：

```bash
node skills/ziqi-lyricist/scripts/validate_lyrics_output.js --file /abs/path/{song}-lyrics.txt
```

2. 再做语义与质量门禁：`quality-gates.md`

不通过则回到步骤6/7修订，并记录修订轮次（`T8-Rn`）。

---

### 步骤9：向用户展示歌词（T9）

按 `lyric-output-template.md` 展示：
- 新歌词
- 创作说明（主题、词眼、手法）
- 请求用户确认

> 注意：模板仅定义结构，示例文本必须替换。

用户要求调整时，保持同一父任务，进入下一轮 `T7-Rn` -> `T8-Rn` -> `T9-Rn`。

---

### 步骤10：保存歌词文件并交接（T10）

用户确认后：
1. 保存 `{song}-lyrics.txt`
2. 确认文件为纯文本 Suno 标签格式
3. 交接下一阶段 `ziqi-producer`
4. 标记父任务完成
